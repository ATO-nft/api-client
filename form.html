<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Āto API v0.1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <title>Āto API v0.1.0</title>
    
  </head>
  <body>
	<style>
		.displayFlex {
			display: flex;
			justify-content: center;
		}
		.displayBlock {
			margin-left: 10px;
			margin-top: 10px;
			border: 1px solid black;
			padding-left: 10px;
		}
	</style>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div name="root">
		<div class="displayFlex"><h1>Ip Rights [Test only]</h1></div>
		<form>
			<div class="displayBlock">
				<h5>Image</h5>
				<div><label>File Name</label><input name="FileName" value="AtoArtwork.png"/></div>
				<div><label>File Type</label><input name="FileType" value="png"/></div>
				<div><label>File Size</label><input name="FileSize" value="24000"/></div>
			</div>
			<div class="displayBlock">
				<h5>Artwork</h5>
				<div><label>Name</label><input name="ArtworkName" value="AtoTest"/></div>
				<div><label>Symbol</label><input name="ArtworkSymbole" value="ATOT"/></div>
				<div><label>Description</label><input name="ArtworkDesc" value="Artwork Description"/></div>
			</div>
			<div class="displayBlock">
				<h5>Artist</h5>
				<div><label>Name</label><input name="ArtistName" value="Julien"/></div>
				<div><label>Address</label><input name="ArtistAddr" value="0x00"/></div>
				<div><label>Network</label>
					<select name="ListNetwork">
						<option>Polygon</option>
						<option>Ethereum</option>
						<option>Rinkeby</option>
					  </select> 					
				</div>
			</div>
			<div class="displayBlock">
				<h5>Rights</h5>
				<div><label>Level</label><input name="RightLevel" value="1"/></div>
				<div><input name="RightAdapt" type="checkbox"/>Right to adapt</div>
				<div><input name="RightLogo" type="checkbox"/>Right to add a logo</div>
				<div><input name="RightMerch" type="checkbox"/>Merchandising rights</div>
				<div><label>Rights duration</label><input name="Righduration" value="70"/></div>
				<div><label>Supply Number</label><input name="SupplyNumber" value="1"/></div>
				<div><label>Exclusive licence</label><input name="RightLicence" value="1"/></div>
				<div><input name="RightNonReissuance" type="checkbox"/>NFT non-reissuance guarantee</div>
				<div><label>Resale Right Percentage</label><input name="RightResalePcent" value="4"/></div>
			</div>
			<div class="displayBlock">
				<h5>Command</h5>
				<div><input name="CmdTest" type="checkbox"/>Test only</div>
				<div><input name="CmdPdf" type="checkbox"/>Generate Pdf</div>
			</div>
			<div>
				<button type="submit">Submit</button>
			</div>
		</form>
	</div>
    <script type="text/javascript">
		const form = document.querySelector('form');
		form.addEventListener('submit', handleSubmit);
		var httpRequest;

		function handleSubmit(event) {
			event.preventDefault();
			const data = new FormData(event.target);
			const value = data.get('FileName');
			//console.log('fileName: ', value);
			const valueAll = Object.fromEntries(data.entries());

			const source = { CheckValues: "N" };
			Object.assign(valueAll, source);
			//console.log('valueAll: ', valueAll);

			console.log('JSON valueAll: ', JSON.stringify(valueAll));
			makeRequest(JSON.stringify(valueAll));
			return false; //don't submit
		}

		// method="POST" action="http://localhost:8080" target="_blank"
		function makeRequest(JSONValues) {
			httpRequest = new XMLHttpRequest();
			if (!httpRequest) {
				alert('Abandon :( Impossible de créer une instance de XMLHTTP');
				return false;
			}
			httpRequest.onreadystatechange = alertContents;
			httpRequest.open('POST', 'http://localhost:8080');
			httpRequest.send(JSONValues);
		}

		function alertContents() {
			if (httpRequest.readyState === XMLHttpRequest.DONE) {
				if (httpRequest.status === 200) {
					alert(httpRequest.responseText);
				} else {
					alert(httpRequest.responseText);
					//alert('Il y a eu un problème avec la requête.');
				}
			}
		}
	</script>
</body>
</html>